"use strict";var _createClass=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(){jQuery(function(a){function e(){var t;_classCallCheck(this,e),this.initialize_enable_disable=this.initialize_enable_disable.bind(this),this.handle_list_reorder=this.handle_list_reorder.bind(this),this.handle_bulk_list_action=this.handle_bulk_list_action.bind(this),this.handle_bulk_edit=this.handle_bulk_edit.bind(this),this.is_taxable_changed=this.is_taxable_changed.bind(this),this.handle_bulk_delete=this.handle_bulk_delete.bind(this),this.block_list=this.block_list.bind(this),this.unblock_list=this.unblock_list.bind(this),void 0!==(t=a("body.woocommerce_page_wc_checkout_add_ons .wp-list-table.add-ons").first())&&(this.list=t,this.params=null!=(t=window.wc_checkout_add_ons_params)?t:{},this.sortable_list=void 0,this.initialize_list())}return window.Checkout_Add_Ons_Add_On_List=(_createClass(e,[{key:"initialize_list",value:function(){return this.initialize_enable_disable(),this.initialize_drag_reorder(),this.initialize_list_bulk_actions()}},{key:"initialize_enable_disable",value:function(){var n=this;return a(document.body).on("click",".js-wc-checkout-add-on-enabled-switch",function(t){var e,i;return t.preventDefault(),n.block_list(),i=a(t.target).is(":checked"),e=a(t.target).closest("tr").data("id"),a.ajax({type:"POST",url:n.params.ajax_url,data:{action:"wc_checkout_add_ons_enable_disable_add_on",security:n.params.list_enable_disable_nonce,enabled:i,add_on:e}}).done(function(){return a(t.target).prop("checked",i)}).always(function(){return n.unblock_list()})})}},{key:"initialize_drag_reorder",value:function(){return a("#the-list").sortable({axis:"y",handle:".js-checkout-add-on-sort-handle",update:this.handle_list_reorder})}},{key:"handle_list_reorder",value:function(t,e){var i=this,n=a("#the-list").sortable("toArray",{attribute:"data-id"});return this.block_list(),a.ajax({type:"POST",url:this.params.ajax_url,data:{action:"wc_checkout_add_ons_sort_add_ons",security:this.params.list_sort_nonce,order:n}}).fail(function(t,e,i){return a("#the-list").sortable("cancel")}).always(function(){return i.unblock_list()})}},{key:"initialize_list_bulk_actions",value:function(){return a("#doaction, #doaction2").on("click",this.handle_bulk_list_action),a("#bulk-edit button.cancel").on("click",this.hide_bulk_edit_row),a("button#bulk_edit").on("click",this.handle_bulk_edit_submit),a("#is_taxable").on("change",this.is_taxable_changed).change()}},{key:"handle_bulk_list_action",value:function(t){var e="#bulk-action-selector-"+("doaction"===t.target.id?"top":"bottom"),t=a(e).val(),e=a('input[name="bulk-action[]"]:checked');return"-1"!==t&&("bulk-edit"===t?this.handle_bulk_edit(e):"bulk-delete"===t?this.handle_bulk_delete(e):void 0)}},{key:"handle_bulk_edit",value:function(t){return t.length&&this.show_bulk_edit_row(),!1}},{key:"show_bulk_edit_row",value:function(){return a("#bulk-edit").appendTo("table.wp-list-table.add-ons thead").show()}},{key:"hide_bulk_edit_row",value:function(){return a("#bulk-edit").appendTo("#bulk-edit-hidden-table").hide()}},{key:"handle_bulk_edit_submit",value:function(t){}},{key:"is_taxable_changed",value:function(t){return t.target.checked?this.show_tax_rate():this.hide_tax_rate()}},{key:"show_tax_rate",value:function(){return a(".tax_class_field").show()}},{key:"hide_tax_rate",value:function(){return a(".tax_class_field").hide()}},{key:"handle_bulk_delete",value:function(t){var e=1<t.length?this.params.i18n.delete_add_ons_confirmation:this.params.i18n.delete_add_on_confirmation;if(!t.length||!confirm(e))return!1}},{key:"block_list",value:function(){return a(this.list).block({message:null,opacity:.6,overlayCSS:{background:"#fff"}})}},{key:"unblock_list",value:function(){return a(this.list).unblock()}}]),e),new Checkout_Add_Ons_Add_On_List})}.call(void 0);